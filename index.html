
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ApiAlly</title>
    <meta name="description" content="Data consolidation tool" />
    <meta name="author" content="ApiAlly" />
    <meta property="og:image" content="/og-image.png" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest"></script>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  </head>

  <body class="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100">
    <!-- Background decoration -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute -top-40 -right-40 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"></div>
      <div class="absolute top-[20%] -left-40 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"></div>
      <div class="absolute -bottom-40 right-[20%] w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"></div>
    </div>

    <!-- Login Screen (initially visible) -->
    <div id="login-screen" class="min-h-screen flex items-center justify-center p-4">
      <div class="w-full max-w-md mx-auto shadow-lg hover:shadow-xl transition-all duration-300 bg-white rounded-lg">
        <div class="p-6 space-y-1">
          <h2 class="text-2xl font-bold text-center">Login</h2>
          <p class="text-center text-gray-500">
            Enter your credentials to access the dashboard
          </p>
        </div>
        <div class="p-6 space-y-4">
          <div class="space-y-2">
            <div class="relative">
              <span class="absolute left-3 top-3 text-gray-400">
                <i data-lucide="user" class="h-5 w-5"></i>
              </span>
              <input
                type="text"
                id="username"
                placeholder="Username"
                class="w-full pl-10 p-2 border border-gray-300 rounded"
              />
            </div>
          </div>
          <div class="space-y-2">
            <div class="relative">
              <span class="absolute left-3 top-3 text-gray-400">
                <i data-lucide="lock" class="h-5 w-5"></i>
              </span>
              <input
                type="password"
                id="password"
                placeholder="Password"
                class="w-full pl-10 p-2 border border-gray-300 rounded"
              />
            </div>
          </div>
        </div>
        <div class="p-6">
          <button 
            id="login-button"
            class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-all duration-300 transform hover:-translate-y-1"
          >
            Login
          </button>
        </div>
        <div class="p-4 bg-gray-100 rounded-b-lg">
          <p class="text-xs text-center text-gray-500">
            For demo purposes, use: <br />
            <span class="font-mono">Username: admin</span> <br />
            <span class="font-mono">Password: password</span>
          </p>
        </div>
      </div>
    </div>

    <!-- Main Dashboard (initially hidden) -->
    <div id="dashboard" class="container max-w-7xl mx-auto relative p-4 hidden">
      <div class="py-10 space-y-8">
        <!-- Header with Logout Button -->
        <div class="flex justify-between items-center">
          <div class="space-y-4 py-4">
            <div class="flex items-center gap-2">
              <div class="bg-blue-500/10 p-2 rounded-full">
                <i data-lucide="database" class="h-6 w-6 text-blue-500"></i>
              </div>
              <h1 class="text-3xl font-medium tracking-tight">ApiAlly</h1>
            </div>
            <p class="text-gray-500 max-w-3xl">
              Easily collect real-time data through your API endpoint, automatically consolidate it into CSV files, 
              and export to your Dropbox at the end of each day.
            </p>
            <div class="flex items-center text-sm text-gray-500">
              <i data-lucide="arrow-down-to-line" class="mr-1 h-4 w-4"></i>
              <span>Configure your API key and Dropbox link below to get started</span>
            </div>
          </div>
          <button id="logout-button" class="border border-gray-300 hover:border-gray-400 px-4 py-2 rounded flex items-center gap-2 transition-all duration-300 transform hover:-translate-y-1">
            <i data-lucide="log-out" class="h-4 w-4"></i>
            Logout
          </button>
        </div>
        
        <hr class="border-gray-200" />
        
        <!-- API Usage Stats -->
        <section>
          <div class="grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4">
            <div class="glass shadow-sm hover:shadow-md transition-all duration-300 rounded-lg">
              <div class="p-6">
                <div class="flex items-center justify-between">
                  <div class="flex flex-col">
                    <span class="text-sm font-medium text-gray-500">Total Data Points</span>
                    <span class="text-2xl font-bold mt-1" id="total-data-points">0</span>
                  </div>
                  <div class="bg-blue-500/10 p-3 rounded-full">
                    <i data-lucide="activity" class="h-5 w-5 text-blue-500"></i>
                  </div>
                </div>
              </div>
            </div>

            <div class="glass shadow-sm hover:shadow-md transition-all duration-300 rounded-lg">
              <div class="p-6">
                <div class="flex items-center justify-between">
                  <div class="flex flex-col">
                    <span class="text-sm font-medium text-gray-500">Active Sources</span>
                    <span class="text-2xl font-bold mt-1" id="active-sources">0/0</span>
                  </div>
                  <div class="bg-blue-500/10 p-3 rounded-full">
                    <i data-lucide="users" class="h-5 w-5 text-blue-500"></i>
                  </div>
                </div>
              </div>
            </div>

            <div class="glass shadow-sm hover:shadow-md transition-all duration-300 rounded-lg">
              <div class="p-6">
                <div class="flex items-center justify-between">
                  <div class="flex flex-col">
                    <span class="text-sm font-medium text-gray-500">Unique Sources</span>
                    <span class="text-2xl font-bold mt-1" id="unique-sources">0</span>
                  </div>
                  <div class="bg-blue-500/10 p-3 rounded-full">
                    <i data-lucide="database" class="h-5 w-5 text-blue-500"></i>
                  </div>
                </div>
              </div>
            </div>

            <div class="glass shadow-sm hover:shadow-md transition-all duration-300 rounded-lg">
              <div class="p-6">
                <div class="flex items-center justify-between">
                  <div class="flex flex-col">
                    <span class="text-sm font-medium text-gray-500">Last Received</span>
                    <span class="text-2xl font-bold mt-1" id="last-received">No data</span>
                  </div>
                  <div class="bg-blue-500/10 p-3 rounded-full">
                    <i data-lucide="clock" class="h-5 w-5 text-blue-500"></i>
                  </div>
                </div>
              </div>
            </div>

            <div class="glass shadow-sm hover:shadow-md transition-all duration-300 rounded-lg">
              <div class="p-6">
                <div class="flex items-center justify-between">
                  <div class="flex flex-col">
                    <span class="text-sm font-medium text-gray-500">Data Types</span>
                    <span class="text-2xl font-bold mt-1" id="data-types">0</span>
                  </div>
                  <div class="bg-blue-500/10 p-3 rounded-full">
                    <i data-lucide="layers" class="h-5 w-5 text-blue-500"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Sources Manager -->
        <section>
          <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
            <div class="p-6">
              <div class="flex items-center justify-between">
                <h2 class="text-xl font-medium">Data Sources</h2>
                <button id="add-source-button" class="text-sm bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded flex items-center gap-1 transition-all duration-300 transform hover:-translate-y-1">
                  <i data-lucide="plus" class="h-4 w-4"></i>
                  Add Source
                </button>
              </div>
              <p class="text-sm text-gray-500">
                Manage data sources and their API keys
              </p>
            </div>
            <div class="p-6">
              <div class="rounded-md border border-gray-200 overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source Name</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">API Key</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data Points</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Active</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                      <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="sources-table-body" class="bg-white divide-y divide-gray-200">
                    <tr>
                      <td colspan="7" class="px-6 py-4 text-center text-sm text-gray-500">
                        No sources available
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Configuration Tabs -->
        <section>
          <h2 class="text-xl font-medium mb-4">Configuration</h2>
          <div class="w-full">
            <div class="border-b border-gray-200">
              <nav class="flex -mb-px">
                <button class="config-tab text-blue-600 border-blue-600 whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="basic">
                  Basic Setup
                </button>
                <button class="config-tab text-gray-500 border-transparent whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="schema">
                  Data Schema
                </button>
                <button class="config-tab text-gray-500 border-transparent whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="deployment">
                  Deployment
                </button>
              </nav>
            </div>
            
            <!-- Basic Setup Tab -->
            <div id="basic-tab" class="tab-content">
              <div class="py-4 grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- API Key Form -->
                <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
                  <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center gap-2">
                      <i data-lucide="key-round" class="h-5 w-5 text-blue-500"></i>
                      <h3 class="text-xl font-medium">API Authentication</h3>
                    </div>
                    <p class="text-sm text-gray-500">
                      Create and manage the API key for secure data transmission
                    </p>
                  </div>
                  <div class="p-6">
                    <div class="space-y-4">
                      <div class="space-y-2">
                        <div class="relative">
                          <input
                            type="text"
                            id="api-key-input"
                            placeholder="Enter API Key"
                            class="w-full pr-10 p-2 border border-gray-300 rounded"
                          />
                          <button 
                            id="copy-api-key"
                            class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-500 transition-colors"
                            title="Copy to clipboard"
                          >
                            <i data-lucide="copy" class="h-4 w-4"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="p-6 border-t border-gray-200 flex justify-between">
                    <button
                      id="generate-api-key"
                      class="border border-gray-300 hover:border-gray-400 px-4 py-2 rounded transition-all duration-300 transform hover:-translate-y-1"
                    >
                      Generate New Key
                    </button>
                    <button 
                      id="save-api-key"
                      class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-all duration-300 transform hover:-translate-y-1"
                    >
                      Save Key
                    </button>
                  </div>
                </div>
                
                <!-- Dropbox Link Form -->
                <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
                  <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center gap-2">
                      <i data-lucide="cloud" class="h-5 w-5 text-blue-500"></i>
                      <h3 class="text-xl font-medium">Dropbox Configuration</h3>
                    </div>
                    <p class="text-sm text-gray-500">
                      Configure where your daily CSV exports will be stored
                    </p>
                  </div>
                  <div class="p-6">
                    <div class="space-y-4">
                      <div class="space-y-2">
                        <input
                          type="text"
                          id="dropbox-link"
                          placeholder="https://www.dropbox.com/scl/fo/your-shared-folder"
                          class="w-full p-2 border border-gray-300 rounded"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="p-6 border-t border-gray-200 flex justify-end">
                    <button 
                      id="save-dropbox-link"
                      class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded flex items-center gap-2 transition-all duration-300 transform hover:-translate-y-1"
                    >
                      <i data-lucide="check" class="h-4 w-4"></i>
                      Save Link
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Schema Tab (initially hidden) -->
            <div id="schema-tab" class="tab-content hidden">
              <div class="py-4">
                <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
                  <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center gap-2">
                      <i data-lucide="file-json" class="h-5 w-5 text-blue-500"></i>
                      <h3 class="text-xl font-medium">Data Schema Editor</h3>
                    </div>
                    <p class="text-sm text-gray-500">
                      Define the expected data structure for incoming API requests
                    </p>
                  </div>
                  <div class="p-6">
                    <div class="space-y-6">
                      <div class="space-y-3">
                        <h4 class="text-sm font-medium">Add New Field</h4>
                        <div class="flex flex-wrap gap-2 items-end">
                          <div class="grow-[2] min-w-[150px]">
                            <label class="text-xs text-gray-500">Field Name</label>
                            <input
                              type="text"
                              id="new-field-name"
                              placeholder="e.g. temperature"
                              class="w-full p-2 border border-gray-300 rounded"
                            />
                          </div>
                          <div class="grow min-w-[120px]">
                            <label class="text-xs text-gray-500">Data Type</label>
                            <select id="new-field-type" class="w-full p-2 border border-gray-300 rounded">
                              <option value="string">String</option>
                              <option value="number">Number</option>
                              <option value="boolean">Boolean</option>
                              <option value="object">Object</option>
                            </select>
                          </div>
                          <div class="flex items-center gap-2 h-10">
                            <label class="text-xs flex items-center gap-2 cursor-pointer">
                              <input 
                                type="checkbox" 
                                id="new-field-required"
                                class="rounded"
                              />
                              <span>Required</span>
                            </label>
                            <button 
                              id="add-field-button"
                              class="ml-2 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded"
                            >
                              <i data-lucide="plus" class="h-4 w-4"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      
                      <div class="space-y-3">
                        <h4 class="text-sm font-medium">Current Schema</h4>
                        <div id="current-schema" class="space-y-2">
                          <p class="text-sm text-gray-500">No fields defined yet. Add your first field above.</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="p-6 border-t border-gray-200 flex justify-between">
                    <div class="text-xs text-gray-500">
                      <span id="schema-stats">0 fields defined, 0 required</span>
                    </div>
                    <button 
                      id="save-schema"
                      class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded flex items-center gap-2 transition-all duration-300 transform hover:-translate-y-1"
                    >
                      <i data-lucide="save" class="h-4 w-4"></i>
                      Save Schema
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Deployment Tab (initially hidden) -->
            <div id="deployment-tab" class="tab-content hidden">
              <div class="py-4">
                <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg p-6">
                  <div class="flex items-center gap-2 mb-4">
                    <i data-lucide="server" class="h-5 w-5 text-blue-500"></i>
                    <h3 class="text-xl font-medium">Deployment Guide</h3>
                  </div>
                  
                  <div class="p-4 bg-amber-50 border border-amber-200 text-amber-800 rounded-lg mb-4">
                    <div class="flex gap-2">
                      <i data-lucide="alert-triangle" class="h-5 w-5 flex-shrink-0"></i>
                      <div>
                        <h4 class="font-bold">Important Installation Notes</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-sm">
                          <li>The API requires PHP with mod_rewrite enabled</li>
                          <li>Make sure your server has write permissions for the data directory</li>
                          <li>Always use the test.php script to verify your installation</li>
                          <li>If uploading to csvscrub.com/api, make sure all files are in that directory</li>
                          <li><strong>Ensure the .htaccess file has proper RewriteBase setting</strong> (e.g., RewriteBase /api/)</li>
                          <li><strong class="text-amber-800">The .htaccess file is critical but may be hidden in file managers</strong></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  
                  <div class="border-b border-gray-200 mb-4">
                    <nav class="flex -mb-px">
                      <button class="deploy-tab text-blue-600 border-blue-600 whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="siteground">
                        SiteGround
                      </button>
                      <button class="deploy-tab text-gray-500 border-transparent whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="netlify">
                        Netlify
                      </button>
                      <button class="deploy-tab text-gray-500 border-transparent whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="vercel">
                        Vercel
                      </button>
                      <button class="deploy-tab text-gray-500 border-transparent whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm" data-tab="manual">
                        Manual
                      </button>
                    </nav>
                  </div>
                  
                  <!-- Deployment content will be dynamically generated -->
                  <div id="deployment-content">
                    <div class="space-y-2">
                      <h4 class="text-sm font-medium">Deploy to SiteGround</h4>
                      <ol class="list-decimal list-inside space-y-2 text-sm">
                        <li>Log in to your SiteGround account</li>
                        <li>Go to Site Tools > Site > File Manager</li>
                        <li>Navigate to public_html or www directory</li>
                        <li>Upload all files from the distribution package</li>
                        <li>Make sure to include the hidden .htaccess file</li>
                        <li>Set permissions for the data directory to 755</li>
                      </ol>
                    </div>
                  </div>
                  
                  <!-- Troubleshooting section -->
                  <div class="p-4 bg-primary/5 rounded-md mt-6">
                    <h4 class="text-sm font-medium mb-2">Troubleshooting Common Issues</h4>
                    <ol class="list-decimal list-inside space-y-2 text-sm">
                      <li><strong>API Connectivity Error (404)</strong>: 
                        <ul class="list-disc list-inside ml-5 text-gray-500">
                          <li>Check that all files are in the correct location.</li>
                          <li><strong class="text-amber-800">Make sure .htaccess file is uploaded and readable by the server (it's often hidden in FTP clients).</strong></li>
                          <li>Verify mod_rewrite is enabled in your Apache configuration.</li>
                        </ul>
                      </li>
                      <li><strong>Server Error (500)</strong>:
                        <ul class="list-disc list-inside ml-5 text-gray-500">
                          <li>Check your server's error logs for specific PHP errors.</li>
                          <li>Verify PHP version is 7.0 or higher.</li>
                        </ul>
                      </li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Control and Data View -->
        <section class="space-y-6">
          <h2 class="text-xl font-medium mb-4">Manage & Test</h2>
          
          <!-- Control Panel -->
          <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
            <div class="p-6 border-b border-gray-200">
              <h3 class="text-xl font-medium">Control Panel</h3>
              <p class="text-sm text-gray-500">
                Test API functionality and trigger operations
              </p>
            </div>
            <div class="p-6">
              <div class="space-y-6">
                <div class="space-y-3">
                  <h4 class="text-sm font-medium">Test Data Submission</h4>
                  <div class="flex flex-col gap-3">
                    <div class="flex flex-col gap-2">
                      <label for="source-select" class="text-sm text-gray-500">
                        Select Source for Test Data
                      </label>
                      <select 
                        id="source-select"
                        class="w-full p-2 border border-gray-300 rounded"
                      >
                        <option value="none" disabled selected>No sources available</option>
                      </select>
                    </div>
                    
                    <button 
                      id="send-test-data"
                      class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded flex items-center gap-2 transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0"
                      disabled
                    >
                      <i data-lucide="send" class="h-4 w-4"></i>
                      Send Test Data
                    </button>
                    
                    <div id="test-result" class="mt-2 text-sm hidden">
                      <!-- Test result will appear here -->
                    </div>
                  </div>
                </div>
                
                <div class="space-y-3">
                  <h4 class="text-sm font-medium">Manual Operations</h4>
                  <div class="flex flex-wrap gap-2">
                    <button
                      id="trigger-export"
                      class="border border-gray-300 hover:border-gray-400 px-4 py-2 rounded flex items-center gap-2 transition-all duration-300 transform hover:-translate-y-1"
                    >
                      <i data-lucide="clock" class="h-4 w-4"></i>
                      Trigger CSV Export Now
                    </button>
                    
                    <button
                      id="clear-data"
                      class="border border-gray-300 hover:border-gray-400 px-4 py-2 rounded flex items-center gap-2 transition-all duration-300 transform hover:-translate-y-1"
                    >
                      <i data-lucide="database" class="h-4 w-4"></i>
                      Clear All Data
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Data Table -->
          <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
            <div class="p-6 border-b border-gray-200">
              <div class="flex items-center justify-between">
                <h3 class="text-xl font-medium">Received Data</h3>
                <div class="flex gap-2">
                  <button 
                    id="clear-table-data"
                    class="border border-gray-300 hover:border-gray-400 px-3 py-1 rounded flex items-center gap-1 text-sm transition-all duration-300 transform hover:-translate-y-1"
                  >
                    <i data-lucide="trash-2" class="h-4 w-4"></i>
                    Clear
                  </button>
                  <button 
                    id="export-csv"
                    class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded flex items-center gap-1 text-sm transition-all duration-300 transform hover:-translate-y-1"
                    disabled
                  >
                    <i data-lucide="download" class="h-4 w-4"></i>
                    Export CSV
                  </button>
                </div>
              </div>
              <p class="text-sm text-gray-500">
                View and manage data received from your API
              </p>
              <div class="flex flex-col gap-2 sm:flex-row mt-4">
                <div class="relative flex-1">
                  <i data-lucide="search" class="absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-500"></i>
                  <input
                    id="search-data"
                    placeholder="Search data..."
                    class="w-full pl-8 p-2 border border-gray-300 rounded"
                  />
                </div>
                <div class="w-full sm:w-48">
                  <select id="filter-source" class="w-full p-2 border border-gray-300 rounded">
                    <option value="all">All Sources</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="overflow-auto">
              <div class="relative overflow-x-auto border-t border-gray-200">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50 sticky top-0">
                    <tr id="data-table-header">
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No Data</th>
                    </tr>
                  </thead>
                  <tbody id="data-table-body" class="bg-white divide-y divide-gray-200">
                    <tr>
                      <td colspan="1" class="px-6 py-4 text-center text-sm text-gray-500">
                        No data available
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="p-4 border-t border-gray-200 text-sm text-gray-500">
              <span id="data-table-stats">Showing 0 of 0 entries</span>
            </div>
          </div>
        </section>
        
        <!-- API Documentation -->
        <section class="space-y-6 pb-10">
          <h2 class="text-xl font-medium mb-4">Documentation</h2>
          
          <div class="w-full shadow-sm hover:shadow-md transition-all duration-300 bg-white rounded-lg">
            <div class="p-6 border-b border-gray-200">
              <div class="flex items-center gap-2">
                <i data-lucide="file-json" class="h-5 w-5 text-blue-500"></i>
                <h3 class="text-xl font-medium">API Integration Guide</h3>
              </div>
              <p class="text-sm text-gray-500">
                Instructions for integrating with your data consolidation API
              </p>
            </div>
            <div class="p-6">
              <div class="space-y-6">
                <div class="space-y-2">
                  <h4 class="text-sm font-medium">Endpoint and Authentication</h4>
                  <p class="text-sm text-gray-500">
                    Send your data to the following endpoint using your API key for authentication:
                  </p>
                  <div class="flex items-center justify-between bg-gray-100 p-3 rounded-md">
                    <code id="api-endpoint" class="text-xs sm:text-sm break-all">https://your-domain.com/api/data</code>
                    <button 
                      id="copy-endpoint"
                      class="text-gray-500 hover:text-blue-500 p-1"
                    >
                      <i data-lucide="copy" class="h-3 w-3"></i>
                    </button>
                  </div>
                  <p class="text-xs text-gray-500 mt-2">
                    <span class="font-medium flex items-center gap-1">
                      <i data-lucide="globe" class="h-3 w-3"></i> Note:
                    </span> 
                    This endpoint will automatically use your domain name. After deployment to SiteGround, this will reflect your actual server address.
                  </p>
                </div>
                
                <div class="space-y-3">
                  <h4 class="text-sm font-medium">Request Format</h4>
                  <div class="border-b border-gray-200">
                    <nav class="flex -mb-px">
                      <button class="api-tab text-blue-600 border-blue-600 whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm" data-tab="curl">
                        cURL
                      </button>
                      <button class="api-tab text-gray-500 border-transparent whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm" data-tab="js">
                        JavaScript
                      </button>
                      <button class="api-tab text-gray-500 border-transparent whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm" data-tab="python">
                        Python
                      </button>
                    </nav>
                  </div>
                  
                  <div id="api-curl-tab" class="api-tab-content relative">
                    <div class="bg-gray-100 p-3 rounded-md overflow-x-auto">
                      <pre id="curl-example" class="text-xs sm:text-sm whitespace-pre-wrap">curl -X POST https://your-domain.com/api/data \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{
    "sensorId": "sensor-1",
    "temperature": 25.4,
    "humidity": 68,
    "pressure": 1013.2
  }'</pre>
                    </div>
                    <button 
                      id="copy-curl"
                      class="absolute top-2 right-2 bg-white/80 text-gray-500 hover:text-blue-500 p-1 rounded"
                    >
                      <i data-lucide="copy" class="h-3 w-3"></i>
                    </button>
                  </div>
                  
                  <div id="api-js-tab" class="api-tab-content relative hidden">
                    <div class="bg-gray-100 p-3 rounded-md overflow-x-auto">
                      <pre id="js-example" class="text-xs sm:text-sm whitespace-pre-wrap">// Using fetch API
const url = 'https://your-domain.com/api/data';
const apiKey = 'YOUR_API_KEY';

const data = {
  sensorId: 'sensor-1',
  temperature: 25.4,
  humidity: 68,
  pressure: 1013.2
};

fetch(url, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': apiKey
  },
  body: JSON.stringify(data)
})
.then(response => response.json())
.then(result => console.log('Success:', result))
.catch(error => console.error('Error:', error));</pre>
                    </div>
                    <button 
                      id="copy-js"
                      class="absolute top-2 right-2 bg-white/80 text-gray-500 hover:text-blue-500 p-1 rounded"
                    >
                      <i data-lucide="copy" class="h-3 w-3"></i>
                    </button>
                  </div>
                  
                  <div id="api-python-tab" class="api-tab-content relative hidden">
                    <div class="bg-gray-100 p-3 rounded-md overflow-x-auto">
                      <pre id="python-example" class="text-xs sm:text-sm whitespace-pre-wrap">import requests
import json

url = "https://your-domain.com/api/data"
api_key = "YOUR_API_KEY"

headers = {
    'Content-Type': 'application/json',
    'X-API-Key': api_key
}

data = {
    "sensorId": "sensor-1",
    "temperature": 25.4,
    "humidity": 68,
    "pressure": 1013.2
}

response = requests.post(url, headers=headers, data=json.dumps(data))
print(response.json())</pre>
                    </div>
                    <button 
                      id="copy-python"
                      class="absolute top-2 right-2 bg-white/80 text-gray-500 hover:text-blue-500 p-1 rounded"
                    >
                      <i data-lucide="copy" class="h-3 w-3"></i>
                    </button>
                  </div>
                </div>
                
                <div class="space-y-2">
                  <h4 class="text-sm font-medium">CSV Export Schedule</h4>
                  <p class="text-sm text-gray-500">
                    All data received throughout the day will be automatically consolidated into a CSV file and exported 
                    to your configured Dropbox location at midnight UTC. You can also trigger manual exports from the Control Panel.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <!-- Add Source Modal (hidden by default) -->
    <div id="add-source-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
        <div class="p-6">
          <h3 class="text-lg font-medium mb-2">Add New Data Source</h3>
          <p class="text-sm text-gray-500 mb-4">
            Create a new data source and generate an API key for it.
          </p>
          <input
            id="new-source-name"
            class="w-full p-2 border border-gray-300 rounded mb-4"
            placeholder="Enter source name (e.g., Factory Sensors)"
          />
          <div class="flex justify-end gap-2">
            <button id="cancel-add-source" class="border border-gray-300 px-4 py-2 rounded">
              Cancel
            </button>
            <button id="confirm-add-source" class="bg-blue-500 text-white px-4 py-2 rounded">
              Add Source
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Edit Source Modal (hidden by default) -->
    <div id="edit-source-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
        <div class="p-6">
          <h3 class="text-lg font-medium mb-2">Edit Source</h3>
          <p class="text-sm text-gray-500 mb-4">
            Update the source name or manage its API key.
          </p>
          <input
            id="edit-source-name"
            class="w-full p-2 border border-gray-300 rounded mb-4"
            placeholder="Enter new source name"
          />
          <div class="flex justify-end gap-2">
            <button id="cancel-edit-source" class="border border-gray-300 px-4 py-2 rounded">
              Cancel
            </button>
            <button id="confirm-edit-source" class="bg-blue-500 text-white px-4 py-2 rounded">
              Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Toast Notification (hidden by default) -->
    <div id="toast" class="fixed right-4 bottom-4 px-4 py-2 rounded-lg shadow-lg transition-all duration-300 transform translate-y-16 opacity-0">
      <div class="flex items-center gap-2">
        <i id="toast-icon" data-lucide="check-circle" class="h-5 w-5"></i>
        <div>
          <div id="toast-title" class="font-medium"></div>
          <div id="toast-message" class="text-sm"></div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
